<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>모바일 청첩장 v2 — 안정판</title>
  <meta name="theme-color" content="#f9f6f1" />
  <!-- 네이버 지도 SDK: 실제 배포 시 YOUR_NAVER_MAPS_CLIENT_ID 교체 -->
  <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=YOUR_NAVER_MAPS_CLIENT_ID"></script>
  <style>
    :root{
      --accent:#ff5a8a;
      --blur:14px;
      --radius:20px;
      --safe-bottom: env(safe-area-inset-bottom, 16px);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:#f9f6f1;color:#222;font-family:'Noto Sans KR',ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;overflow:hidden}

    /* 배경 */
    .bg-wrap{position:fixed;inset:0;z-index:-2;overflow:hidden}
    .bg-wrap img{width:120%;height:120%;object-fit:cover;transform:translate(-10%,-10%);filter:saturate(1.02) brightness(1.02) contrast(1.02)}
    .bg-overlay{position:fixed;inset:0;z-index:-1;background:linear-gradient(180deg,rgba(255,255,255,.70),rgba(255,255,255,.35))}

    /* 상단 헤더 제거 → 레이아웃 보정 */
    /* header 삭제됨 */

    /* 라우터 뷰: 헤더 제거로 top=0로 조정 */
    main#router{position:fixed;top:0;bottom:84px;left:0;right:0;overflow:auto;padding:16px}
    section.view{display:none;animation:fade .28s ease}
    section.view.active{display:block}
    @keyframes fade{from{opacity:.0;transform:translateY(4px)}to{opacity:1;transform:none}}

    /* 카드 공통 */
    .card{background:rgba(255,255,255,.82);border:1px solid rgba(0,0,0,.06);border-radius:var(--radius);padding:18px;box-shadow:0 8px 24px rgba(0,0,0,.06)}
    .chip{display:inline-flex;align-items:center;gap:6px;border:1px solid rgba(0,0,0,.12);background:#fff;color:#333;padding:6px 10px;border-radius:999px;font-size:12px}

    /* 홈 히어로 + 인사말(개선) */
    .hero-wrap{
      min-height:calc(100dvh - 84px - 32px); /* 탭바 높이 + router padding 고려 */
      display:flex;align-items:center;justify-content:center;
    }
    .hero{
      display:flex;flex-direction:column;align-items:center;text-align:center;gap:14px;
      padding:32px 16px 28px; /* 위아래 패딩 확장 */
    }
    .hero .names{font-size:32px;font-weight:800;color:#222}
    .hero .amp{color:var(--accent)}
    .hero .date{color:#4f4f56;font-size:15px}
    .intro-card{
      margin-top:18px;display:inline-block;max-width:540px;
      background:rgba(255,255,255,.92);border-radius:20px;
      padding:28px 22px; /* 내부 패딩 확장 */
      border:1px solid #eee;box-shadow:0 8px 20px rgba(0,0,0,.05)
    }
    .intro-title{font-family:'Marcellus',serif;font-size:18px;color:#8b6b4f;margin-bottom:12px}
    .intro-text{line-height:1.95;font-size:15px;color:#444;white-space:pre-line}

    .info-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
    .info-item{padding:14px;border-radius:16px;background:rgba(255,255,255,.9);border:1px solid rgba(0,0,0,.06);color:#2b2b2b}
    .info-item .k{font-size:12px;color:#777}
    .info-item .v{font-weight:800;margin-top:6px}

    /* 갤러리 */
    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:4px}
    .grid3 img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:10px;cursor:pointer}
    .lightbox{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.85);z-index:20}
    .lightbox.active{display:grid}
    .lightbox img{max-width:92vw;max-height:78vh;border-radius:12px}

    /* 계좌/연락 */
    .bank{display:grid;gap:12px}
    .bank-row{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px;border-radius:14px;background:rgba(255,255,255,.9);border:1px solid rgba(0,0,0,.06);color:#2b2b2b}
    .bank-row .meta{display:grid}
    .bank-row .meta .k{font-size:12px;color:#777}
    .bank-row .meta .v{font-weight:800}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid rgba(0,0,0,.12);background:#fff;color:#222;font-weight:700;text-decoration:none;cursor:pointer}
    .btn:active{transform:translateY(1px)}

    /* 지도 */
    .map-card{height:300px;border-radius:16px;overflow:hidden;background:#fff;border:1px solid rgba(0,0,0,.06)}
    #naverMap{width:100%;height:100%}

    /* 탭바 */
    nav.tabbar{--tabs:4;position:fixed;left:0;right:0;bottom:0;height:84px;padding:8px 10px calc(8px + var(--safe-bottom));z-index:5;display:grid;grid-template-columns:repeat(var(--tabs),1fr);gap:8px;align-items:end;backdrop-filter:blur(var(--blur));background:linear-gradient(0deg,rgba(255,255,255,.75),rgba(255,255,255,.45));border-top:1px solid rgba(0,0,0,.06)}
    .tab{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;padding:8px 2px;border-radius:12px;color:#5a5a60;text-decoration:none;user-select:none;min-width:0}
    .tab svg{width:26px;height:26px;display:block;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;vector-effect:non-scaling-stroke;shape-rendering:geometricPrecision}
    .tab.active{color:#111}
    .tab.active .dot{width:6px;height:6px;background:var(--accent);border-radius:999px}
    .label{font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1}

    /* 토스트 */
    .toast{position:fixed;left:50%;bottom:calc(96px + var(--safe-bottom));transform:translateX(-50%);z-index:50;background:rgba(20,20,22,.9);color:#fff;padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.12);display:none}
    .toast.show{display:block;animation:pop .32s ease}
    @keyframes pop{from{opacity:0;transform:translate(-50%,8px)}to{opacity:1;transform:translate(-50%,0)}}
  </style>
</head>
<body>
  <!-- 배경 -->
  <div class="bg-wrap" aria-hidden="true">
    <img id="bgGif" src="https://images.pexels.com/photos/2253870/pexels-photo-2253870.jpeg" alt="배경 이미지" />
  </div>
  <div class="bg-overlay" aria-hidden="true"></div>

  <!-- 헤더 제거됨 -->

  <main id="router">
    <!-- 홈 -->
    <section class="view active" data-route="home">
      <div class="hero-wrap">
        <div class="card hero">
          <span class="chip">초대합니다</span>
          <div class="names">김규민 <span class="amp">&</span> 김의인</div>
          <div class="date">2026. 00. 00 (토) · 오전 11:00</div>
          <div class="date">사랑의교회 언약채플</div>
          <!-- 인사말 카드 -->
          <div class="intro-card">
            <div class="intro-title">초대의 글</div>
            <div class="intro-text">함께 웃고 울며 서로의 삶을 채워온 두 사람이
이제 하나의 이름으로 새로운 길을 걸어가려 합니다.
따스한 가을 햇살 아래, 그 시작의 순간에 귀한 발걸음으로 함께해 주세요.

여러분의 축복 속에서 더 단단히 사랑하며 살겠습니다.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 갤러리 (3x3 피드) -->
    <section class="view" data-route="gallery">
      <div class="grid3" id="feed">
        <img src="https://images.unsplash.com/photo-1522673607200-164d1b6ce486?q=80&w=600&auto=format&fit=crop" alt="사진1" />
        <img src="https://cdn.pixabay.com/photo/2019/10/20/10/38/flower-4563208_1280.jpg=80&w=600&auto=format&fit=crop" alt="사진2" />
        <img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=600&auto=format&fit=crop" alt="사진3" />
        <img src="https://cdn.pixabay.com/photo/2019/11/10/11/13/happy-valentines-day-4615557_1280.jpg=80&w=600&auto=format&fit=crop" alt="사진4" />
        <img src="https://images.unsplash.com/photo-1460364157752-926555421a7e?q=80&w=600&auto=format&fit=crop" alt="사진5" />
        <img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=600&auto=format&fit=crop" alt="사진6" />
        <img src="https://images.unsplash.com/photo-1522673607200-164d1b6ce486?q=80&w=600&auto=format&fit=crop" alt="사진7" />
        <img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=600&auto=format&fit=crop" alt="사진8" />
        <img src="https://cdn.pixabay.com/photo/2017/03/21/18/43/couple-2162950_1280.jpg=80&w=600&auto=format&fit=crop" alt="사진9" />
      </div>
    </section>

    <!-- 계좌 & 연락 -->
    <section class="view" data-route="info">
      <div class="bank">
        <div class="bank-row">
          <div class="meta">
            <span class="k">신랑측 축의</span>
            <span class="v" id="acc-g">국민 123456-78-901234 (김규민)</span>
          </div>
          <button class="btn" data-copy="#acc-g">복사</button>
        </div>
        <div class="bank-row">
          <div class="meta">
            <span class="k">신부측 축의</span>
            <span class="v" id="acc-b">신한 987-654-321000 (김의인)</span>
          </div>
          <button class="btn" data-copy="#acc-b">복사</button>
        </div>
        <div class="bank-row">
          <div class="meta">
            <span class="k">연락(신랑)</span>
            <span class="v" id="call-g">010-1234-5678</span>
          </div>
          <a class="btn" href="tel:01012345678">전화</a>
        </div>
        <div class="bank-row">
          <div class="meta">
            <span class="k">연락(신부)</span>
            <span class="v" id="call-b">010-9876-5432</span>
          </div>
          <a class="btn" href="tel:01098765432">전화</a>
        </div>
      </div>
    </section>

    <!-- 오시는 길 (네이버 지도) -->
    <section class="view" data-route="map">
      <div class="card" style="margin-bottom:12px">
        <div style="font-weight:800;margin-bottom:6px">사랑의교회 언약채플</div>
        <div style="color:#6b6b6b;font-size:14px">서울 서초구 (정확 주소 입력 예정)</div>
      </div>
      <div class="map-card"><div id="naverMap" role="application" aria-label="네이버 지도"></div></div>
      <div style="display:flex;gap:8px;margin-top:12px">
        <a class="btn" id="openNaver" target="_blank" rel="noopener">네이버 지도 열기</a>
        <a class="btn" id="openKakao" target="_blank" rel="noopener">카카오맵 열기</a>
      </div>
    </section>
  </main>

  <!-- 라이트박스 -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="사진 크게 보기">
    <img alt="미리보기" />
  </div>

  <!-- 탭바: 홈 / 갤러리 / 계좌·연락 / 오시는 길 -->
  <nav class="tabbar" aria-label="하단 탭바">
    <a class="tab active" data-link="home" href="#home" aria-label="홈">
      <svg viewBox="0 0 24 24"><path d="M3 11.5 12 4l9 7.5"/><path d="M5 10.5V20h14v-9.5"/></svg>
      <span class="label">홈</span>
      <div class="dot"></div>
    </a>
    <a class="tab" data-link="gallery" href="#gallery" aria-label="갤러리">
      <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7.5" height="7.5" rx="1.5"/><rect x="13.5" y="3" width="7.5" height="7.5" rx="1.5"/><rect x="3" y="13.5" width="7.5" height="7.5" rx="1.5"/><rect x="13.5" y="13.5" width="7.5" height="7.5" rx="1.5"/></svg>
      <span class="label">갤러리</span>
      <div class="dot" hidden></div>
    </a>
    <a class="tab" data-link="info" href="#info" aria-label="계좌/연락">
      <svg viewBox="0 0 24 24"><rect x="2.5" y="5" width="19" height="14" rx="2"/><path d="M2.5 9h19"/></svg>
      <span class="label">계좌·연락</span>
      <div class="dot" hidden></div>
    </a>
    <a class="tab" data-link="map" href="#map" aria-label="오시는 길">
      <svg viewBox="0 0 24 24"><path d="M12 21s7-5.2 7-11a7 7 0 1 0-14 0c0 5.8 7 11 7 11Z"/><circle cx="12" cy="10" r="2.8"/></svg>
      <span class="label">오시는 길</span>
      <div class="dot" hidden></div>
    </a>
  </nav>

  <div class="toast" id="toast">복사되었습니다</div>

  <script>
    // 탭 라우팅
    const tabs = document.querySelectorAll('.tabbar .tab');
    const routeOrder = ['home','gallery','info','map'];
    const views = document.querySelectorAll('section.view');
    const router = document.getElementById('router');
    function activate(route){
      tabs.forEach(t=>{
        const on = t.dataset.link === route;
        t.classList.toggle('active', on);
        const dot = t.querySelector('.dot');
        if(dot) dot.toggleAttribute('hidden', !on);
      });
      views.forEach(v=>v.classList.toggle('active', v.dataset.route===route));
      router.scrollTop = 0;
      if(route==='map') initMapOnce();
    }
    tabs.forEach(t=>t.addEventListener('click', e=>{
      e.preventDefault();
      activate(t.dataset.link);
      history.replaceState({},'', '#'+t.dataset.link);
    }));
    let initRoute=(location.hash?.replace('#','')||'home');
    if(!routeOrder.includes(initRoute)) initRoute='home';
    activate(initRoute);

    // 스와이프 내비게이션 (좌/우)
    let touchStartX=0,touchStartY=0,swiping=false;
    router.addEventListener('touchstart',e=>{
      const t=e.changedTouches[0];touchStartX=t.clientX;touchStartY=t.clientY;swiping=true;
    },{passive:true});
    router.addEventListener('touchend',e=>{
      if(!swiping)return;swiping=false;
      const t=e.changedTouches[0];
      const dx=t.clientX-touchStartX;const dy=t.clientY-touchStartY;
      if(Math.abs(dx)<50||Math.abs(dx)<Math.abs(dy))return;
      const hash=location.hash?.replace('#','')||'home';
      let idx=routeOrder.indexOf(hash); if(idx<0)idx=0;
      if(dx<0&&idx<routeOrder.length-1)idx++; else if(dx>0&&idx>0)idx--;
      const next=routeOrder[idx]; activate(next); history.replaceState({},'', '#'+next);
    },{passive:true});

    // 복사 버튼 + 토스트
    const toast=document.getElementById('toast');
    document.querySelectorAll('[data-copy]').forEach(btn=>{
      btn.addEventListener('click',async()=>{
        const sel=btn.getAttribute('data-copy');
        const text=document.querySelector(sel)?.innerText?.trim();
        if(text){
          try{await navigator.clipboard.writeText(text);toast.textContent='복사되었습니다';}
          catch(err){toast.textContent='복사 실패. 길게 눌러 복사하세요';}
          toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),1400);
        }
      })
    });

    // 라이트박스
    const lb=document.getElementById('lightbox');
    document.getElementById('feed').addEventListener('click',e=>{
      if(e.target.tagName==='IMG'){lb.querySelector('img').src=e.target.src;lb.classList.add('active');}
    });
    lb.addEventListener('click',()=>lb.classList.remove('active'));

    // 배경 이미지 교체 함수
    window.setBackgroundImage=(url)=>{document.getElementById('bgGif').src=url;}

    // 네이버 지도: 1회 초기화
    let mapInited=false;
    function initMapOnce(){
      if(mapInited) return; mapInited=true;

      // TODO: 실제 좌표로 교체 (사랑의교회 언약채플)
      const VENUE={lat:37.487, lng:127.017}; // 임시값(서초 일대)
      if(window.naver&&naver.maps){
        const map=new naver.maps.Map('naverMap',{
          center:new naver.maps.LatLng(VENUE.lat,VENUE.lng),zoom:16,zoomControl:true
        });
        new naver.maps.Marker({
          position:new naver.maps.LatLng(VENUE.lat,VENUE.lng),
          map,title:'사랑의교회 언약채플'
        });
        const q=encodeURIComponent('사랑의교회 언약채플');
        document.getElementById('openNaver').href=`https://map.naver.com/v5/search/${q}`;
        document.getElementById('openKakao').href=`https://map.kakao.com/?q=${q}`;
      }else{
        document.getElementById('naverMap').innerHTML='<div style="display:grid;place-items:center;height:100%;color:#999">지도 SDK 로드 실패 — ncpClientId를 설정하세요</div>';
      }
    }
  </script>
</body>
</html>
